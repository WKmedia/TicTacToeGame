<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe Game</title>
    <style>
        body{
            display:flex;
            flex-direction: column;
            align-items: center;
        }
        #start-game{
            margin-bottom: 15px;
            height: 40px;
            width: 140px;
        }
        #player-div{
            display:flex;
            justify-content: space-between;
            width:580px;
            padding: 0 10px;
            background-color: burlywood;
        }
    </style>
</head>
<body>
    <h1>Tic Tac Toe</h1>
    <button id="start-game" onclick="Gameplay()">Start Game</button>
    <div id="player-div">
        <h3>Player X </h3>
        <h3>Player O</h3>
    </div>
    <div id="winner-display">
        <h3>Winner:</h3>
        <div id="winner-message"></div>
    </div>

    <script>
        //GAME BOARD
        const Board = (function createGridCells() {

            const gridSize = 3; // Change this to adjust the grid size
            const gameCells = gridSize * gridSize;/// multiply gridsize for gameboard
            const gamePlayBoard = document.createElement('div') 
                gamePlayBoard.setAttribute('id', 'game-play-board');
                gamePlayBoard.style.display = 'flex';
                gamePlayBoard.style.flexWrap = 'wrap';
                gamePlayBoard.style.width = '600px';
                gamePlayBoard.style.border = 'solid 1px red';
//game-play-board
            for (let i = 0; i < gameCells; i++) {
                const gridCell = document.createElement('div');
                let id = i;
                let idString = id.toString();
                gridCell.setAttribute('class', 'grid-cell');
                gridCell.setAttribute('id', `${idString}`);
                gridCell.textContent = `${idString}`;
                gridCell.style.width = '200px'; 
                gridCell.style.height = '200px'; 
                gridCell.style.border = 'solid 1px red';
                gridCell.style.boxSizing = 'border-box';
                gridCell.style.display = 'flex';
                gridCell.style.lineHeight = '195px';
                gridCell.style.justifyContent = 'center';
                gamePlayBoard.append(gridCell);
            }
            
            document.body.append(gamePlayBoard);

            
            return {
               
                gamePlayBoard,
                
            }
            

        })()

     //Revealing module function   
    const Gameboard = (function() {
        let gameboard = [];    
        let gridSquare;

        function addSquaresToArray() {
            let gridSquares= document.getElementsByClassName('grid-cell');

            for(let i = 0; i < gridSquares.length; i++) {

                let gridSquare =  gridSquares[i];
                gameboard.push(gridSquare);
                                    
            }
            
            return {

                gameboard,
                gridSquare,

            }                
                
        }

        function clearSquares() {
            let gridSquares= document.getElementsByClassName('grid-cell');

            for(let i = 0; i < gridSquares.length; i++) {
            let gridSquare =  gridSquares[i];
                gridSquare.textContent = '';
                
                
            }
        } 

        return {
            gameboard,
            addSquaresToArray: addSquaresToArray,
            clearSquares: clearSquares,
            
        }
        
    })();

        
        
       const player = (function () {
            //Create an object and define its properties 
            const player1 = {
                name: 'Player-X',
                mark: 'X',
                player: 'player1',
                
                displayPlayer: function() {
                    return(`${this.name} ${this.player} won`);
                },
                
            }
            //Player 2 Obj
            const player2 = {
                name: 'Player-O',
                mark: 'O',
                player: 'player2',

                displayPlayer: function() {
                    return(`${this.name} ${this.player} won`)
                },
            } 
                      
            
            return {player1, player2}
        })()
        
       

        function Gameplay() {
            Gameboard.clearSquares();
            Gameboard.addSquaresToArray();
            const gridSquares = document.getElementsByClassName('grid-cell');
            let currentPlayer = player.player1;
            const xMark = player.player1.mark;
            const oMark = player.player2.mark;
            const tilesArray = Gameboard.gameboard;
            
            function checkForWin(playerMark) {
                const winningCombos = [
                    [0, 1, 2], [0, 3, 6], [0, 4, 8],
                    [6, 4, 2], [4, 1, 7], [5, 8, 2],
                    [6, 7, 8], [3, 4, 5]
                ];

                for (const combo of winningCombos) {
                    const [a, b, c] = combo;
                    if (tilesArray[a].textContent === playerMark &&
                        tilesArray[b].textContent === playerMark &&
                        tilesArray[c].textContent === playerMark) {
                        return true;
                    }
                }
                return false;
                }

                for (let i = 0; i < gridSquares.length; i++){
                    let gridSquare = gridSquares[i];
                    let winMessage = document.getElementById('winner-message');
                    winMessage.textContent = '';
                    
                    gridSquare.style.fontSize = '225px';
                    gridSquare.addEventListener('click', function() {

                        if (gridSquare.textContent === '') {

                        }
                        if(currentPlayer === player.player1 && 
                        gridSquare.textContent == '')
                        {
                            gridSquare.textContent = xMark;
                            toggleActivePlayer();

                            if(checkForWin(xMark)) 
                            {
                            

                            let winningMessage = player.player1.displayPlayer();
                                winMessage.append(winningMessage);
                                
                        }
                        
                        
                        } else if(currentPlayer === player.player2 && gridSquare.textContent == '') 
                        {
                            gridSquare.textContent = oMark;
                            toggleActivePlayer();
                            if(checkForWin(oMark)) 
                            {let winMessage = document.getElementById('winner-message');
                            

                            let winningMessage = player.player2.displayPlayer();
                                winMessage.append(winningMessage);
                        }
                           
                        
                        }
                        
                    })
                    
                    
                }

           
                // Function to toggle the active player
            function toggleActivePlayer() {
                    if (currentPlayer === player.player1) {
                        currentPlayer = player.player2;
                    } else {
                        currentPlayer = player.player1;
                    }
                }
  
        };


        const displayController = (function() {}) ();
    </script>
</body>
</html>